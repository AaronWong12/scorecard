<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Credit Risk Scorecard â€¢ scorecard</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Credit Risk Scorecard">
<meta property="og:description" content="
  The `scorecard` package makes the development of credit risk scorecard 
  easier and efficient by providing functions, such as information 
  value, variable filter, optimal woe binning, scorecard scaling and 
  performance evaluation etc. 
    The references including: 
  1. Refaat, M. (2011, ISBN: 9781447511199). Credit Risk Scorecard: 
  Development and Implementation Using SAS. 
  2. Siddiqi, N. (2006, ISBN: 9780471754510). Credit risk scorecards. 
  Developing and Implementing Intelligent Credit Scoring.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">scorecard</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/demo.html">Developing a Credit Scorcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://shichen.name/slide/20171115scorecard/">
    <span class="fa fa-file-powerpoint-o fa-lg"></span>
     
    slides
  </a>
</li>
<li>
  <a href="https://github.com/ShichenXie/scorecard">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="scorecard" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#scorecard" class="anchor"></a>scorecard</h1></div>

<p>The goal of <code>scorecard</code> package is to make the development of traditional credit risk scorecard model easier and efficient by providing functions for some common tasks.</p>
<ul>
<li>data partition (<code>split_df</code>)</li>
<li>variable selection (<code>iv</code>, <code>var_filter</code>)</li>
<li>weight of evidence (woe) binning (<code>woebin</code>, <code>woebin_plot</code>, <code>woebin_adj</code>, <code>woebin_ply</code>)</li>
<li>scorecard scaling (<code>scorecard</code>, <code>scorecard_ply</code>)</li>
<li>performance evaluation (<code>perf_eva</code>, <code>perf_psi</code>)</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<ul>
<li>Install the release version of <code>scorecard</code> from <a href="https://cran.r-project.org/package=scorecard">CRAN</a> with:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"scorecard"</span>)</a></code></pre></div>
<ul>
<li>Install the latest version of <code>scorecard</code> from <a href="https://github.com/ShichenXie/scorecard">github</a> with:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"shichenxie/scorecard"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a basic example which shows you how to develop a common credit risk scorecard:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Traditional Credit Scoring Using Logistic Regression</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">library</span>(scorecard)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co"># data prepare ------</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># load germancredit data</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="kw">data</span>(<span class="st">"germancredit"</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># filter variable via missing rate, iv, identical value rate</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">dt_s =<span class="st"> </span><span class="kw"><a href="reference/var_filter.html">var_filter</a></span>(germancredit, <span class="dt">y=</span><span class="st">"creditability"</span>)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co"># breaking dt into train and test</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">dt_list =<span class="st"> </span><span class="kw"><a href="reference/split_df.html">split_df</a></span>(dt_s, <span class="dt">y=</span><span class="st">"creditability"</span>, <span class="dt">ratio =</span> <span class="fl">0.6</span>, <span class="dt">seed =</span> <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">train =<span class="st"> </span>dt_list<span class="op">$</span>train; test =<span class="st"> </span>dt_list<span class="op">$</span>test;</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co"># woe binning ------</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">bins =<span class="st"> </span><span class="kw"><a href="reference/woebin.html">woebin</a></span>(dt_s, <span class="dt">y=</span><span class="st">"creditability"</span>)</a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co"># woebin_plot(bins)</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co"># binning adjustment</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co"># # adjust breaks interactively</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co"># breaks_adj = woebin_adj(dt_s, "creditability", bins) </span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co"># # or specify breaks manually</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23">breaks_adj =<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb3-24" data-line-number="24">  <span class="dt">age.in.years=</span><span class="kw">c</span>(<span class="dv">26</span>, <span class="dv">35</span>, <span class="dv">40</span>),</a>
<a class="sourceLine" id="cb3-25" data-line-number="25">  <span class="dt">other.debtors.or.guarantors=</span><span class="kw">c</span>(<span class="st">"none"</span>, <span class="st">"co-applicant%,%guarantor"</span>))</a>
<a class="sourceLine" id="cb3-26" data-line-number="26">bins_adj =<span class="st"> </span><span class="kw"><a href="reference/woebin.html">woebin</a></span>(dt_s, <span class="dt">y=</span><span class="st">"creditability"</span>, <span class="dt">breaks_list=</span>breaks_adj)</a>
<a class="sourceLine" id="cb3-27" data-line-number="27"></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co"># converting train and test into woe values</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29">train_woe =<span class="st"> </span><span class="kw"><a href="reference/woebin_ply.html">woebin_ply</a></span>(train, bins_adj)</a>
<a class="sourceLine" id="cb3-30" data-line-number="30">test_woe =<span class="st"> </span><span class="kw"><a href="reference/woebin_ply.html">woebin_ply</a></span>(test, bins_adj)</a>
<a class="sourceLine" id="cb3-31" data-line-number="31"></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co"># glm ------</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33">m1 =<span class="st"> </span><span class="kw">glm</span>( creditability <span class="op">~</span><span class="st"> </span>., <span class="dt">family =</span> <span class="kw">binomial</span>(), <span class="dt">data =</span> train_woe)</a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co"># summary(m1)</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co"># # Adjusting for oversampling (support.sas.com/kb/22/601.html)</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co"># library(data.table)</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="co"># p1=0.03; r1=0.3</span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co"># dt_woe = dt_woe[, weight := ifelse(y==1, p1/r1, (1-p1)/(1-r1) )]</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co"># </span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co"># fmla = as.formula(paste("y ~", paste(names(dt_woe)[2:21], collapse="+")))</span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co"># m1 = glm(fmla, family = binomial(), data = dt_woe, weights = weight)</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"></a>
<a class="sourceLine" id="cb3-44" data-line-number="44"></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co"># Select a formula-based model by AIC (or by LASSO)</span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46">m_step =<span class="st"> </span><span class="kw">step</span>(m1, <span class="dt">direction=</span><span class="st">"both"</span>, <span class="dt">trace =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb3-47" data-line-number="47">m2 =<span class="st"> </span><span class="kw">eval</span>(m_step<span class="op">$</span>call)</a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="co"># summary(m2)</span></a>
<a class="sourceLine" id="cb3-49" data-line-number="49"></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co"># performance ks &amp; roc ------</span></a>
<a class="sourceLine" id="cb3-51" data-line-number="51"><span class="co"># predicted proability</span></a>
<a class="sourceLine" id="cb3-52" data-line-number="52">train_pred =<span class="st"> </span><span class="kw">predict</span>(m2, train_woe, <span class="dt">type=</span><span class="st">'response'</span>)</a>
<a class="sourceLine" id="cb3-53" data-line-number="53">test_pred =<span class="st"> </span><span class="kw">predict</span>(m2, test_woe, <span class="dt">type=</span><span class="st">'response'</span>)</a>
<a class="sourceLine" id="cb3-54" data-line-number="54"><span class="co"># performance</span></a>
<a class="sourceLine" id="cb3-55" data-line-number="55">train_perf =<span class="st"> </span><span class="kw"><a href="reference/perf_eva.html">perf_eva</a></span>(train<span class="op">$</span>creditability, train_pred, <span class="dt">title =</span> <span class="st">"train"</span>)</a>
<a class="sourceLine" id="cb3-56" data-line-number="56">test_perf =<span class="st"> </span><span class="kw"><a href="reference/perf_eva.html">perf_eva</a></span>(test<span class="op">$</span>creditability, test_pred, <span class="dt">title =</span> <span class="st">"test"</span>)</a>
<a class="sourceLine" id="cb3-57" data-line-number="57"></a>
<a class="sourceLine" id="cb3-58" data-line-number="58"><span class="co"># score ------</span></a>
<a class="sourceLine" id="cb3-59" data-line-number="59">card =<span class="st"> </span><span class="kw"><a href="reference/scorecard.html">scorecard</a></span>(bins_adj, m2)</a>
<a class="sourceLine" id="cb3-60" data-line-number="60"><span class="co"># credit score</span></a>
<a class="sourceLine" id="cb3-61" data-line-number="61">train_score =<span class="st"> </span><span class="kw"><a href="reference/scorecard_ply.html">scorecard_ply</a></span>(train, card, <span class="dt">print_step=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb3-62" data-line-number="62">test_score =<span class="st"> </span><span class="kw"><a href="reference/scorecard_ply.html">scorecard_ply</a></span>(test, card, <span class="dt">print_step=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb3-63" data-line-number="63"></a>
<a class="sourceLine" id="cb3-64" data-line-number="64"><span class="co"># psi</span></a>
<a class="sourceLine" id="cb3-65" data-line-number="65"><span class="kw"><a href="reference/perf_psi.html">perf_psi</a></span>(</a>
<a class="sourceLine" id="cb3-66" data-line-number="66">  <span class="dt">score =</span> <span class="kw">list</span>(<span class="dt">train =</span> train_score, <span class="dt">test =</span> test_score),</a>
<a class="sourceLine" id="cb3-67" data-line-number="67">  <span class="dt">label =</span> <span class="kw">list</span>(<span class="dt">train =</span> train<span class="op">$</span>creditability, <span class="dt">test =</span> test<span class="op">$</span>creditability)</a>
<a class="sourceLine" id="cb3-68" data-line-number="68">)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=scorecard">https://â€‹cloud.r-project.org/â€‹package=scorecard</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ShichenXie/scorecard">https://â€‹github.com/â€‹ShichenXie/â€‹scorecard</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ShichenXie/scorecard/issues">https://â€‹github.com/â€‹ShichenXie/â€‹scorecard/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Shichen Xie <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=scorecard"><img src="https://www.r-pkg.org/badges/version/scorecard" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=scorecard"><img src="http://cranlogs.r-pkg.org/badges/grand-total/scorecard"></a></li>
<li><a href="https://travis-ci.org/ShichenXie/scorecard"><img src="https://travis-ci.org/ShichenXie/scorecard.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Shichen Xie.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
